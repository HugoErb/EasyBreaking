<main>
    <div class="container">
        <h1>Easy Breaking</h1>
        <div class="select">
            <p-autoComplete [(ngModel)]="selectedItem" [dropdown]="true" [suggestions]="filteredItems"
                (completeMethod)="filterItem($event)" field="name" (onSelect)="selectItem()"
                placeholder="Entrez le nom d'un item..." (keyup)="vanishDiv()"></p-autoComplete>
        </div>
        <table class="itemTable">
            <thead>
                <tr>
                    <td>Caractéristiques</td>
                    <td>Nom des runes</td>
                    <td>Prix unitaire des runes</td>
                    <td>Quantité de runes</td>
                    <td>Kamas obtenus</td>
                    <td>Quantité de runes (focus)</td>
                    <td>Kamas obtenus (focus)</td>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of tableau;">
                    <td><img src={{row.runeImg}}>
                        <div class="text">{{row.stat}}</div>
                    </td>
                    <td>{{row.runeName}}</td>
                    <td>{{row.runePrice | number: '1.0-0'}}</td>
                    <td>{{row.runeQuantity| number: '1.0-2'}}</td>
                    <td>{{row.kamasEarned | number: '1.0-0'}}</td>
                    <td>{{row.runeQuantityFocused| number: '1.0-2'}}</td>
                    <td [style.backgroundColor]="row.focusedKamasEarned === maxValue && row.focusedKamasEarned !== 0 ? this.maxCellColor : ''"
                        [style.color]="row.focusedKamasEarned === maxValue && row.focusedKamasEarned !== 0 ? maxCellTextColor : ''"
                        [style.fontWeight]="row.focusedKamasEarned === maxValue && row.focusedKamasEarned !== 0 ? 'bold' : ''">
                        {{row.focusedKamasEarned | number: '1.0-0'}}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td class="firstNoBorder" colspan="4"></td>
                    <td [style.backgroundColor]="sumKamasEarned === maxValue && sumKamasEarned !== 0 ? this.maxCellColor : ''"
                        [style.color]="sumKamasEarned === maxValue && sumKamasEarned !== 0 ? maxCellTextColor : ''"
                        [style.fontWeight]="sumKamasEarned === maxValue && sumKamasEarned !== 0 ? 'bold' : ''">
                        {{sumKamasEarned | number: '1.0-0'}}</td>
                    <td class="lastNoBorder" colspan="2"></td>
                </tr>
            </tfoot>
        </table>
        <div class="inputTexts">
            <span class="p-input-icon-right">
                <i class="fa-solid fa-percent"></i>
                <input pInputText pKeyFilter="int" placeholder="Taux de brisage" pattern="^(?:100|\d{1,2})$"
                    oninput="this.value=this.value.replace(/[^0-9]/g,'')" maxlength="4" [(ngModel)]="tauxBrisage"
                    (input)="selectItem()" />
            </span>
            <input pInputText pKeyFilter="int" placeholder="Prix du craft" [(ngModel)]="prixCraft"
                (input)="selectItem()" />
            <span class="p-input-icon-right">
                <i class="fa-solid fa-percent"></i>
                <input pInputText pKeyFilter="int" placeholder="Taux de rentabilité" pattern="^(?:100|\d{1,2})$"
                    oninput="this.value=this.value.replace(/[^0-9]/g,'')" maxlength="4" [(ngModel)]="tauxRentabilite"
                    (input)="selectItem()" />
            </span>
        </div>
    </div>
</main>